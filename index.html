<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Samuel Mwangi — Tech Growth Engineer</title>
  <meta name="description" content="Samuel Mwangi — Tech Growth Engineer (Software & Systems). Backend, automation, AI-enabled platforms, and operational systems." />

  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3CradialGradient id='g' cx='18%25' cy='12%25'%3E%3Cstop offset='0%25' stop-color='%232f66ff' stop-opacity='.45'/%3E%3Cstop offset='55%25' stop-color='%230b0f1a' stop-opacity='1'/%3E%3Cstop offset='100%25' stop-color='%23060a12' stop-opacity='1'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='64' height='64' rx='16' fill='url(%23g)'/%3E%3Cg fill='none' stroke='%23b8c8ff' stroke-width='3.4'%3E%3Crect x='14' y='16' width='36' height='22' rx='6'/%3E%3Cpath d='M24 46h16'/%3E%3Cpath d='M20 42h24'/%3E%3C/g%3E%3C/svg%3E" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

  <!-- Set theme from system preference ASAP (and keep manual override if saved) -->
  <script>
    (() => {
      const root = document.documentElement;
      const stored = localStorage.getItem('theme');
      const mq = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
      const systemTheme = mq && mq.matches ? 'dark' : 'light';
      const theme = (stored === 'dark' || stored === 'light') ? stored : systemTheme;
      root.setAttribute('data-theme', theme);
    })();
  </script>

  <style>
    :root{
      /* Layout */
      --maxw: 1180px;
      --gutter: clamp(16px, 2.6vw, 28px);

      --r-xl: 28px;
      --r-lg: 24px;
      --r-md: 18px;
      --pill: 999px;

      --header-h: 74px;
      --anchor-gap: 16px;
      --scroll-offset: calc(var(--header-h) + var(--anchor-gap));

      /* Type */
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      /* Adaptive type sizes */
      --h1: clamp(34px, 5.2vw, 64px);
      --h2: clamp(18px, 2.2vw, 24px);
      --p: clamp(14px, 1.2vw, 16px);
      --micro: clamp(11px, 0.9vw, 12px);
      --tag: clamp(10px, 0.9vw, 11px);
      --icon: clamp(16px, 1.6vw, 20px);

      /* Theme (dark default) */
      --bg0: #060912;
      --bg1: #070a12;

      --ink: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.62);
      --faint: rgba(255,255,255,0.46);

      --accent: #2f66ff;
      --accent2: #1f4fda;

      --line: rgba(255,255,255,0.12);
      --line2: rgba(255,255,255,0.08);

      --glass: rgba(15,20,34,0.56);
      --glassBorder: rgba(255,255,255,0.12);
      --blur: 16px;

      --shadow: 0 26px 80px rgba(0,0,0,0.55);
      --shadow2: 0 16px 48px rgba(0,0,0,0.45);

      --chipBg: rgba(47,102,255,0.14);
      --chipBorder: rgba(47,102,255,0.28);

      --focus: 0 0 0 4px rgba(47,102,255,0.22);
    }

    [data-theme="light"]{
      --bg0: #f6f7fb;
      --bg1: #ffffff;

      --ink: rgba(11,15,26,0.92);
      --muted: rgba(11,15,26,0.62);
      --faint: rgba(11,15,26,0.46);

      --line: rgba(11,15,26,0.12);
      --line2: rgba(11,15,26,0.08);

      --glass: rgba(255,255,255,0.64);
      --glassBorder: rgba(11,15,26,0.10);

      --shadow: 0 18px 48px rgba(11,15,26,0.10);
      --shadow2: 0 12px 30px rgba(11,15,26,0.08);

      --chipBg: rgba(47,102,255,0.08);
      --chipBorder: rgba(47,102,255,0.20);

      --focus: 0 0 0 4px rgba(47,102,255,0.18);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--ink);
      background:
        radial-gradient(1100px 800px at 14% 10%, rgba(47,102,255,0.22), transparent 62%),
        radial-gradient(900px 700px at 84% 18%, rgba(0,0,0,0.55), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      padding-top: calc(var(--header-h) + 12px);
      overflow-x: hidden; /* hard stop for horizontal overflow */
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    a{ color:inherit; text-decoration:none; }
    img{ max-width:100%; display:block; }
    .wrap{ max-width: var(--maxw); margin:0 auto; padding: 0 var(--gutter); }

    section, [id]{ scroll-margin-top: var(--scroll-offset); }

    /* ---------- Glass pill header ---------- */
    header{
      position: fixed;
      top: 12px;
      left: 0;
      right: 0;
      z-index: 9999;
      pointer-events: none;
    }
    .nav-shell{
      pointer-events: auto;
      margin: 0 auto;
      width: min(var(--maxw), calc(100% - (var(--gutter)*2)));
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: var(--pill);
      background: var(--glass);
      border: 1px solid var(--glassBorder);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 200px;
      max-width: 56%;
    }
    .mark{
      width: 42px;
      height: 42px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background:
        radial-gradient(14px 14px at 30% 30%, rgba(47,102,255,0.60), rgba(47,102,255,0.10) 60%),
        linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));
      display:flex;
      align-items:center;
      justify-content:center;
      flex: 0 0 auto;
    }
    [data-theme="light"] .mark{
      background:
        radial-gradient(14px 14px at 30% 30%, rgba(47,102,255,0.55), rgba(47,102,255,0.08) 60%),
        linear-gradient(180deg, rgba(11,15,26,0.06), rgba(11,15,26,0.03));
    }
    .mark svg{ width: 18px; height: 18px; }
    .mark svg *{ stroke: var(--accent); }

    .name{
      min-width: 0;
      display:flex;
      flex-direction: column;
      gap: 2px;
      line-height: 1.1;
    }
    .name strong{
      font-size: var(--micro);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-weight: 800;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .name span{
      font-family: var(--mono);
      font-size: calc(var(--micro) - 1px);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--faint);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .navlinks{
      display:flex;
      align-items:center;
      gap: 8px;
      flex-wrap: nowrap;
      justify-content: flex-end;
    }
    .navlinks a{
      font-size: var(--micro);
      letter-spacing: 0.10em;
      text-transform: uppercase;
      color: var(--muted);
      padding: 10px 12px;
      border-radius: var(--pill);
      transition: background 160ms ease, color 160ms ease;
      white-space: nowrap;
    }
    .navlinks a:hover{
      color: var(--ink);
      background: rgba(47,102,255,0.12);
    }

    .nav-actions{
      display:flex;
      align-items:center;
      gap: 8px;
      flex: 0 0 auto;
    }
    .iconbtn{
      width: 42px;
      height: 42px;
      border-radius: var(--pill);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      transition: transform 160ms ease, border 160ms ease, background 160ms ease;
    }
    [data-theme="light"] .iconbtn{ background: rgba(11,15,26,0.03); }
    .iconbtn:hover{ transform: translateY(-1px); border-color: rgba(47,102,255,0.32); }
    .iconbtn i{ font-size: var(--icon); line-height: 1; }

    .cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      border-radius: var(--pill);
      padding: 10px 14px;
      border: 1px solid rgba(47,102,255,0.35);
      background: linear-gradient(180deg, rgba(47,102,255,0.95), rgba(31,79,218,0.92));
      color:#fff;
      box-shadow: 0 18px 46px rgba(47,102,255,0.22);
      font-size: var(--micro);
      letter-spacing: 0.10em;
      text-transform: uppercase;
      white-space: nowrap;
      transition: transform 160ms ease, filter 160ms ease;
    }
    .cta:hover{ transform: translateY(-1px); filter: brightness(0.99); }

    /* Mobile menu */
    .hamburger{ display:none; }
    .mobile-menu{
      position: fixed;
      top: calc(12px + var(--header-h));
      left: 0;
      right: 0;
      z-index: 9998;
      display:none;
    }
    .mobile-panel{
      margin: 0 auto;
      width: min(var(--maxw), calc(100% - (var(--gutter)*2)));
      border-radius: var(--r-lg);
      background: var(--glass);
      border: 1px solid var(--glassBorder);
      box-shadow: var(--shadow);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      padding: 12px;
      display:flex;
      flex-direction: column;
      gap: 8px;
    }
    .mobile-panel a{
      display:flex;
      justify-content: space-between;
      align-items:center;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid var(--line2);
      background: rgba(255,255,255,0.06);
      font-size: var(--micro);
      letter-spacing: 0.10em;
      text-transform: uppercase;
      color: var(--ink);
    }
    [data-theme="light"] .mobile-panel a{ background: rgba(11,15,26,0.03); }

    /* ---------- Sections ---------- */
    .section{ padding: clamp(34px, 5vw, 64px) 0; }
    .section-head{
      display:flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 18px;
      margin-bottom: clamp(14px, 2vw, 18px);
    }
    .kicker{
      margin: 0 0 12px;
      font-family: var(--mono);
      font-size: var(--micro);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--faint);
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .dot{
      width: 10px;
      height: 10px;
      border-radius: var(--pill);
      border: 1px solid rgba(47,102,255,0.55);
      background: rgba(47,102,255,0.16);
      flex: 0 0 auto;
    }
    h1{
      margin: 0;
      font-size: var(--h1);
      letter-spacing: -0.03em;
      line-height: 1.03;
      font-weight: 900;
    }
    h2{
      margin: 0;
      font-size: var(--h2);
      font-weight: 850;
      letter-spacing: -0.01em;
      line-height: 1.2;
    }
    .muted{
      margin: 0;
      font-size: var(--p);
      line-height: 1.6;
      color: var(--muted);
      max-width: 62ch;
    }
    .hide-sm{ display: block; }

    /* ---------- Hero (less text, more space) ---------- */
    .hero{
      padding: clamp(42px, 6vw, 86px) 0 clamp(18px, 3vw, 30px);
    }
    .hero-grid{
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: clamp(18px, 4vw, 46px);
      align-items: start;
    }
    .hero-lead{
      margin-top: 14px;
      font-size: var(--p);
      line-height: 1.65;
      color: var(--muted);
      max-width: 58ch;
    }
    .hero-actions{
      margin-top: 18px;
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      border-radius: var(--pill);
      padding: 10px 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      font-size: var(--micro);
      letter-spacing: 0.10em;
      text-transform: uppercase;
      color: var(--ink);
      transition: transform 160ms ease, border 160ms ease, background 160ms ease;
      white-space: nowrap;
    }
    [data-theme="light"] .btn{ background: rgba(11,15,26,0.03); }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(47,102,255,0.32); }
    .btn.primary{
      border-color: rgba(47,102,255,0.35);
      background: linear-gradient(180deg, rgba(47,102,255,0.95), rgba(31,79,218,0.92));
      color: #fff;
      box-shadow: 0 18px 46px rgba(47,102,255,0.22);
    }

    .hero-media{
      border-radius: var(--r-xl);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      min-height: clamp(320px, 40vw, 460px);
    }
    .hero-media img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.01);
    }
    .hero-media::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 420px at 20% 15%, rgba(47,102,255,0.22), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.38));
      pointer-events:none;
    }

    /* Focus floating panel (less text) */
    .focus-panel{
      position:absolute;
      left: clamp(14px, 2vw, 18px);
      right: clamp(14px, 2vw, 18px);
      bottom: clamp(14px, 2vw, 18px);
      border-radius: 18px;
      border: 1px solid var(--line2);
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      padding: 14px;
      display:flex;
      flex-direction: column;
      gap: 10px;
      max-width: 520px;
    }
    [data-theme="light"] .focus-panel{ background: rgba(255,255,255,0.58); }
    .focus-top{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .focus-top strong{
      font-size: var(--micro);
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }
    .focus-top span{
      font-family: var(--mono);
      font-size: var(--tag);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--faint);
    }

    .chips{
      display:flex;
      flex-wrap: wrap;         /* no overflow */
      gap: 10px;
      align-items:flex-start;
    }
    .chip{
      max-width: 100%;
      border-radius: var(--pill);
      padding: 10px 12px;
      border: 1px solid var(--chipBorder);
      background: var(--chipBg);
      font-family: var(--mono);
      font-size: var(--micro);
      letter-spacing: 0.04em;
      color: var(--ink);
      overflow-wrap: anywhere; /* no overflow */
      word-break: break-word;  /* no overflow */
      line-height: 1.35;
    }

    /* ---------- Work & Projects (more image, less text) ---------- */
    .seg{
      display:flex;
      gap: 6px;
      align-items:center;
      border-radius: var(--pill);
      padding: 6px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      box-shadow: 0 8px 18px rgba(0,0,0,0.22);
      flex: 0 0 auto;
    }
    [data-theme="light"] .seg{ background: rgba(11,15,26,0.03); box-shadow: 0 8px 18px rgba(11,15,26,0.06); }
    .seg a{
      padding: 10px 14px;
      border-radius: var(--pill);
      font-size: var(--micro);
      letter-spacing: 0.10em;
      text-transform: uppercase;
      color: var(--muted);
      transition: background 160ms ease, color 160ms ease;
      white-space: nowrap;
    }
    .seg a.active{
      background: rgba(47,102,255,0.16);
      color: var(--ink);
    }
    .seg a:hover{ color: var(--ink); }

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: clamp(12px, 1.6vw, 16px);
    }
    .span-6{ grid-column: span 6; }
    .span-12{ grid-column: span 12; }

    .project{
      border-radius: var(--r-xl);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      box-shadow: var(--shadow2);
      overflow:hidden; /* no overflow */
      position: relative;
      min-height: clamp(340px, 36vw, 440px);
      display:flex;
      flex-direction: column;
    }
    [data-theme="light"] .project{ background: rgba(255,255,255,0.64); }

    .project .img{
      position:absolute;
      inset:0;
    }
    .project .img img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.01);
    }
    .project .img::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(1000px 520px at 25% 18%, rgba(47,102,255,0.22), transparent 60%),
        radial-gradient(900px 520px at 80% 40%, rgba(0,0,0,0.55), transparent 65%),
        linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.62));
      pointer-events:none;
    }
    [data-theme="light"] .project .img::after{
      background:
        radial-gradient(1000px 520px at 25% 18%, rgba(47,102,255,0.18), transparent 60%),
        radial-gradient(900px 520px at 80% 40%, rgba(11,15,26,0.08), transparent 65%),
        linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.72));
    }

    /* Icon cluster (spaced, no overlap) */
    .icon-cluster{
      position:absolute;
      left: clamp(14px, 2vw, 18px);
      top: clamp(14px, 2vw, 18px);
      display:flex;
      gap: 10px; /* spaced out */
      padding: 8px;
      border-radius: 18px;
      border: 1px solid var(--line2);
      background: rgba(255,255,255,0.06);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }
    [data-theme="light"] .icon-cluster{ background: rgba(255,255,255,0.58); }
    .badge{
      width: clamp(40px, 5vw, 46px);
      height: clamp(40px, 5vw, 46px);
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    [data-theme="light"] .badge{ background: rgba(11,15,26,0.03); }
    .badge i{ font-size: clamp(16px, 1.8vw, 20px); }

    /* Bottom content (minimal text) */
    .project .content{
      margin-top: auto;
      position: relative;
      padding: clamp(16px, 2.2vw, 20px);
      display:flex;
      flex-direction: column;
      gap: 10px;
    }
    .row{
      display:flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      min-width: 0;
    }
    .project h3{
      margin:0;
      font-size: clamp(16px, 2vw, 20px);
      font-weight: 900;
      letter-spacing: -0.01em;
      line-height: 1.2;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      max-width: 100%;
    }
    .tag{
      font-family: var(--mono);
      font-size: var(--tag);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--faint);
      white-space: nowrap;
    }
    .desc{
      margin:0;
      color: var(--muted);
      font-size: var(--p);
      line-height: 1.55;
      max-width: 62ch;
      display: -webkit-box;
      -webkit-line-clamp: 2; /* adaptive */
      -webkit-box-orient: vertical;
      overflow: hidden; /* no overflow */
    }

    .project .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      margin-top: 4px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: var(--pill);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      font-family: var(--mono);
      font-size: var(--micro);
      letter-spacing: 0.06em;
      text-transform: uppercase;
      transition: transform 160ms ease, border 160ms ease;
      white-space: nowrap;
    }
    [data-theme="light"] .pill{ background: rgba(11,15,26,0.03); }
    .pill:hover{ transform: translateY(-1px); border-color: rgba(47,102,255,0.32); }

    /* ---------- Skills (keep clean, lots of whitespace) ---------- */
    .skill-grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: clamp(12px, 1.6vw, 16px);
    }
    .panel{
      border-radius: var(--r-xl);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      box-shadow: var(--shadow2);
      padding: clamp(16px, 2.2vw, 20px);
      overflow:hidden;
    }
    [data-theme="light"] .panel{ background: rgba(255,255,255,0.64); }
    .panel-top{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .panel-top strong{
      font-size: var(--micro);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 850;
    }
    .panel-top i{ font-size: var(--icon); color: var(--faint); }

    .list{
      list-style:none;
      margin: 0;
      padding: 0;
      display:grid;
      gap: 8px;
    }
    .list li{
      font-family: var(--mono);
      font-size: var(--micro);
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--muted);
      line-height: 1.55;
      overflow-wrap: anywhere;
      word-break: break-word;
    }

    /* ---------- Contact / Footer ---------- */
    .contact{
      border-radius: var(--r-xl);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      box-shadow: var(--shadow2);
      padding: clamp(16px, 2.2vw, 20px);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
      overflow:hidden;
    }
    [data-theme="light"] .contact{ background: rgba(255,255,255,0.64); }
    .contact strong{
      display:block;
      font-size: var(--micro);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 8px;
    }
    .contact span{
      font-family: var(--mono);
      font-size: var(--micro);
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--muted);
      overflow-wrap: anywhere;
    }

    footer{
      padding: clamp(40px, 6vw, 70px) 0;
      color: var(--faint);
      font-family: var(--mono);
      font-size: var(--micro);
      letter-spacing: 0.10em;
      text-transform: uppercase;
    }
    .foot{
      border-radius: var(--r-xl);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      box-shadow: var(--shadow2);
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      overflow:hidden;
    }
    [data-theme="light"] .foot{ background: rgba(255,255,255,0.64); }

    .foot-links{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
    }
    .foot-links a{
      padding: 10px 12px;
      border-radius: var(--pill);
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      transition: transform 160ms ease, border 160ms ease;
      white-space: nowrap;
    }
    [data-theme="light"] .foot-links a{ background: rgba(11,15,26,0.03); }
    .foot-links a:hover{ transform: translateY(-1px); border-color: rgba(47,102,255,0.32); }

    /* ---------- Floating buttons: toTop ABOVE theme (as requested) ---------- */
    .float-stack{
      position: fixed;
      right: clamp(14px, 2vw, 22px);
      bottom: clamp(14px, 2vw, 22px);
      z-index: 120;
      display:flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }
    .floatbtn{
      width: 52px;
      height: 52px;
      border-radius: var(--pill);
      border: 1px solid rgba(47,102,255,0.35);
      background: linear-gradient(180deg, rgba(47,102,255,0.95), rgba(31,79,218,0.92));
      color: #fff;
      box-shadow: 0 18px 44px rgba(47,102,255,0.22);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor: pointer;
      transition: opacity 160ms ease, transform 160ms ease, filter 160ms ease;
    }
    .floatbtn i{ font-size: clamp(18px, 2vw, 22px); }

    /* toTop visibility */
    .floatbtn.top{
      opacity: 0;
      transform: translateY(8px);
      pointer-events: none;
    }
    .floatbtn.top.show{
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    .floatbtn:hover{ filter: brightness(0.98); }

    /* Accessibility */
    a:focus-visible, button:focus-visible{ outline:none; box-shadow: var(--focus); }

    /* ---------- Responsiveness ---------- */
    @media (max-width: 1020px){
      .hero-grid{ grid-template-columns: 1fr; }
      .section-head{ flex-direction: column; align-items: flex-start; }
      .span-6{ grid-column: span 12; }
      .skill-grid{ grid-template-columns: 1fr; }
      .brand{ max-width: 70%; }
      .hide-sm{ display:none; } /* less text on smaller screens */
      .desc{ -webkit-line-clamp: 1; } /* even less text */
    }
    @media (max-width: 840px){
      .navlinks{ display:none; }
      .hamburger{ display:inline-flex; }
    }
    @media (max-width: 520px){
      .brand{ min-width: 0; }
      .mark{ width: 40px; height: 40px; }
      .cta{ display:none; } /* keep header clean on tiny screens */
      .project h3{ white-space: normal; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; }
      .icon-cluster{ gap: 8px; }
      .badge{ border-radius: 14px; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; scroll-behavior:auto !important; }
    }
  </style>
</head>

<body>
  <header aria-label="Top navigation">
    <div class="nav-shell" role="navigation" aria-label="Primary">
      <a class="brand" href="#top" aria-label="Go to top">
        <div class="mark" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="4" width="18" height="12" rx="3.2" stroke-width="1.8" />
            <path d="M8 20h8" stroke-width="1.8" />
            <path d="M6 18h12" stroke-width="1.8" />
          </svg>
        </div>
        <div class="name">
          <strong>SAMUEL MWANGI</strong>
          <span>Tech Growth Engineer</span>
        </div>
      </a>

      <nav class="navlinks" aria-label="Section links">
        <a href="#work">Work</a>
        <a href="#skills">Skills</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="nav-actions">
        <a class="iconbtn" href="https://github.com/scriptedSyntax" target="_blank" rel="noreferrer" aria-label="GitHub">
          <i class="bi bi-github" aria-hidden="true"></i>
        </a>
        <a class="iconbtn" href="https://www.linkedin.com/in/samuel-mwangi-11597a245/" target="_blank" rel="noreferrer" aria-label="LinkedIn">
          <i class="bi bi-linkedin" aria-hidden="true"></i>
        </a>

        <button class="iconbtn hamburger" id="menuBtn" type="button" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenu">
          <i class="bi bi-list" aria-hidden="true"></i>
        </button>

        <a class="cta" href="#contact" aria-label="Jump to contact">
          <i class="bi bi-send" aria-hidden="true"></i>
          Contact
        </a>
      </div>
    </div>
  </header>

  <!-- Mobile dropdown -->
  <div class="mobile-menu" id="mobileMenu" hidden>
    <div class="mobile-panel" role="dialog" aria-label="Mobile menu">
      <a href="#work"><span>Work</span><i class="bi bi-arrow-right" aria-hidden="true"></i></a>
      <a href="#skills"><span>Skills</span><i class="bi bi-arrow-right" aria-hidden="true"></i></a>
      <a href="#contact"><span>Contact</span><i class="bi bi-arrow-right" aria-hidden="true"></i></a>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top: 6px;">
        <a class="btn" style="flex:1;" href="mailto:samuelmwas262@gmail.com"><i class="bi bi-envelope" aria-hidden="true"></i>Email</a>
        <a class="btn" style="flex:1;" href="https://raw.githubusercontent.com/scriptedSyntax/portfolio/724a661f104f20970e49d6822be733bc0790b2e8/samuel%20cv%20tech%20engineer.pdf" target="_blank" rel="noreferrer"><i class="bi bi-file-earmark-pdf" aria-hidden="true"></i>CV</a>
      </div>
    </div>
  </div>

  <main id="top">
    <!-- HERO -->
    <section class="hero">
      <div class="wrap">
        <div class="hero-grid">
          <div>
            <p class="kicker"><span class="dot" aria-hidden="true"></span> Software & Systems</p>
            <h1>Build it. Keep it running.</h1>

            <!-- Keep it short; whitespace does the work -->
            <p class="hero-lead hide-sm">
              Backend, automation, AI-enabled platforms — built for real operations.
            </p>

            <div class="hero-actions">
              <a class="btn primary" href="#work"><i class="bi bi-grid" aria-hidden="true"></i>View work</a>
              <a class="btn" href="https://raw.githubusercontent.com/scriptedSyntax/portfolio/724a661f104f20970e49d6822be733bc0790b2e8/samuel%20cv%20tech%20engineer.pdf" target="_blank" rel="noreferrer"><i class="bi bi-file-earmark-pdf" aria-hidden="true"></i>CV</a>
              <a class="btn" href="mailto:samuelmwas262@gmail.com"><i class="bi bi-envelope" aria-hidden="true"></i>Email</a>
            </div>
          </div>

          <aside class="hero-media" aria-label="Hero image">
            <!-- Real image (swap anytime) -->
            <img
              src="https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?auto=format&fit=crop&w=1800&q=80"
              alt="System and backend workspace"
              loading="eager"
            />

            <!-- Subtle focus panel (no overflow; wraps) -->
            <div class="focus-panel" aria-label="Focus panel">
              <div class="focus-top">
                <strong>Focus</strong>
                <span>Backend • Automation • AI</span>
              </div>
              <div class="chips" aria-label="Focus chips">
                <span class="chip">Django / REST</span>
                <span class="chip">Azure-ready</span>
                <span class="chip">CI/CD</span>
                <span class="chip">RAG-style patterns</span>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- WORK -->
    <section class="section" id="work">
      <div class="wrap">
        <div class="section-head">
          <div>
            <p class="kicker"><span class="dot" aria-hidden="true"></span> Work & Projects</p>
            <h2>Shipped systems + public repos.</h2>
          </div>

          <div style="display:flex; flex-direction:column; gap:12px; align-items:flex-end;">
            <p class="muted hide-sm">Selected management systems and utilities built for real-world operations.</p>

            <!-- Keep the ALL / SYSTEMS / REPOS exactly as your screenshot vibe, but not “picky”.
                 These just jump to anchors (no filtering, no hiding). -->
            <div class="seg" aria-label="Work quick nav">
              <a class="active" href="#work">ALL</a>
              <a href="#systems">SYSTEMS</a>
              <a href="#repos">REPOS</a>
            </div>
          </div>
        </div>

        <!-- SYSTEMS -->
        <div id="systems"></div>
        <div class="grid" style="margin-top: clamp(8px, 1.6vw, 14px);">
          <article class="project span-6" aria-label="Property Management Hub">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-building"></i></div>
              <div class="badge"><i class="bi bi-people"></i></div>
              <div class="badge"><i class="bi bi-graph-up"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>Property Management Hub</h3>
                <span class="tag">Management System</span>
              </div>
              <p class="desc">Property + tenants + tracking.</p>
              <div class="actions">
                <a class="pill" href="mailto:samuelmwas262@gmail.com?subject=Property%20Management%20Hub%20-%20Request">
                  <i class="bi bi-envelope" aria-hidden="true"></i> Request
                </a>
              </div>
            </div>
          </article>

          <article class="project span-6" aria-label="User System">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-person-badge"></i></div>
              <div class="badge"><i class="bi bi-shield-lock"></i></div>
              <div class="badge"><i class="bi bi-key"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>User System</h3>
                <span class="tag">Auth / Roles</span>
              </div>
              <p class="desc">Users, roles, access control.</p>
              <div class="actions">
                <a class="pill" href="mailto:samuelmwas262@gmail.com?subject=User%20System%20-%20Request">
                  <i class="bi bi-envelope" aria-hidden="true"></i> Request
                </a>
              </div>
            </div>
          </article>

          <article class="project span-12" aria-label="Healthline SMS">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?auto=format&fit=crop&w=2000&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-chat-square-text"></i></div>
              <div class="badge"><i class="bi bi-graph-up-arrow"></i></div>
              <div class="badge"><i class="bi bi-plug"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>Healthline SMS</h3>
                <span class="tag">SMS / Dashboard</span>
              </div>
              <p class="desc">Landing + dashboard + SMS API.</p>
              <div class="actions">
                <a class="pill" href="mailto:samuelmwas262@gmail.com?subject=Healthline%20SMS%20-%20Request">
                  <i class="bi bi-envelope" aria-hidden="true"></i> Request
                </a>
              </div>
            </div>
          </article>

          <article class="project span-6" aria-label="Main SMS Platform">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1526498460520-4c246339dccb?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-envelope-paper"></i></div>
              <div class="badge"><i class="bi bi-diagram-3"></i></div>
              <div class="badge"><i class="bi bi-tools"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>Main SMS Platform</h3>
                <span class="tag">Messaging</span>
              </div>
              <p class="desc">Core SMS utilities.</p>
              <div class="actions">
                <a class="pill" href="mailto:samuelmwas262@gmail.com?subject=Main%20SMS%20Platform%20-%20Request">
                  <i class="bi bi-envelope" aria-hidden="true"></i> Request
                </a>
              </div>
            </div>
          </article>

          <article class="project span-6" aria-label="OSV2">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-boxes"></i></div>
              <div class="badge"><i class="bi bi-cpu"></i></div>
              <div class="badge"><i class="bi bi-wrench-adjustable"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>OSV2</h3>
                <span class="tag">System</span>
              </div>
              <p class="desc">Internal build.</p>
              <div class="actions">
                <a class="pill" href="mailto:samuelmwas262@gmail.com?subject=OSV2%20-%20Request">
                  <i class="bi bi-envelope" aria-hidden="true"></i> Request
                </a>
              </div>
            </div>
          </article>
        </div>

        <!-- REPOS -->
        <div id="repos" style="height: clamp(18px, 3vw, 28px);"></div>
        <div class="grid" style="margin-top: clamp(8px, 1.6vw, 14px);">
          <article class="project span-6" aria-label="Django Ready-Made Backend">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1555066932-1c1b1a2d6c4c?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-github"></i></div>
              <div class="badge"><i class="bi bi-braces"></i></div>
              <div class="badge"><i class="bi bi-diagram-2"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>Django Ready-Made Backend</h3>
                <span class="tag">Django / Python</span>
              </div>
              <p class="desc">Backend starter — clean base for APIs, auth, and production-ready structure.</p>
              <div class="actions">
                <a class="pill" href="https://github.com/scriptedSyntax/django-with-python-ready-made-backend" target="_blank" rel="noreferrer">
                  <i class="bi bi-github" aria-hidden="true"></i> Repo
                </a>
              </div>
            </div>
          </article>

          <article class="project span-6" aria-label="Symptom Checker">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1559757148-5c350d0d3c56?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-heart-pulse"></i></div>
              <div class="badge"><i class="bi bi-braces-asterisk"></i></div>
              <div class="badge"><i class="bi bi-search"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>Symptom Checker</h3>
                <span class="tag">JavaScript</span>
              </div>
              <p class="desc">Prototype utility.</p>
              <div class="actions">
                <a class="pill" href="https://github.com/scriptedSyntax/symptomChecker" target="_blank" rel="noreferrer">
                  <i class="bi bi-github" aria-hidden="true"></i> Repo
                </a>
              </div>
            </div>
          </article>

          <article class="project span-6" aria-label="All-in-One Python Portfolio">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-python"></i></div>
              <div class="badge"><i class="bi bi-collection"></i></div>
              <div class="badge"><i class="bi bi-lightning"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>All-in-One Python Portfolio</h3>
                <span class="tag">Python</span>
              </div>
              <p class="desc">Python collection.</p>
              <div class="actions">
                <a class="pill" href="https://github.com/scriptedSyntax/All-in-One-Python-Projects-Portfolio" target="_blank" rel="noreferrer">
                  <i class="bi bi-github" aria-hidden="true"></i> Repo
                </a>
              </div>
            </div>
          </article>

          <article class="project span-6" aria-label="funTime">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1511512578047-dfb367046420?auto=format&fit=crop&w=1800&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-controller"></i></div>
              <div class="badge"><i class="bi bi-joystick"></i></div>
              <div class="badge"><i class="bi bi-stars"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>funTime</h3>
                <span class="tag">Python</span>
              </div>
              <p class="desc">Games & experiments.</p>
              <div class="actions">
                <a class="pill" href="https://github.com/scriptedSyntax/funTime" target="_blank" rel="noreferrer">
                  <i class="bi bi-github" aria-hidden="true"></i> Repo
                </a>
              </div>
            </div>
          </article>

          <article class="project span-12" aria-label="programs">
            <div class="img" aria-hidden="true">
              <img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=2000&q=80" alt="" loading="lazy" />
            </div>

            <div class="icon-cluster" aria-hidden="true">
              <div class="badge"><i class="bi bi-terminal"></i></div>
              <div class="badge"><i class="bi bi-tools"></i></div>
              <div class="badge"><i class="bi bi-box"></i></div>
            </div>

            <div class="content">
              <div class="row">
                <h3>programs</h3>
                <span class="tag">Python</span>
              </div>
              <p class="desc">Utilities & scripts.</p>
              <div class="actions">
                <a class="pill" href="https://github.com/scriptedSyntax/programs" target="_blank" rel="noreferrer">
                  <i class="bi bi-github" aria-hidden="true"></i> Repo
                </a>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- SKILLS -->
    <section class="section" id="skills">
      <div class="wrap">
        <div class="section-head">
          <div>
            <p class="kicker"><span class="dot" aria-hidden="true"></span> Skills</p>
            <h2>Core capabilities.</h2>
          </div>
          <p class="muted hide-sm">
            Technical depth, operational reliability, and systems thinking.
          </p>
        </div>
    
        <div class="skill-grid">
          <!-- Backend -->
          <div class="panel">
            <div class="panel-top">
              <strong>Backend Engineering</strong>
              <i class="bi bi-hdd-network" aria-hidden="true"></i>
            </div>
            <ul class="list">
              <li>Django, Flask, FastAPI, Python</li>
              <li>RESTful APIs & backend architecture</li>
              <li>PostgreSQL, MySQL, SQLite, Firebase</li>
              <li>Authentication, security, data interoperability</li>
              <li>AI-enabled backend systems</li>
            </ul>
          </div>
    
          <!-- Automation -->
          <div class="panel">
            <div class="panel-top">
              <strong>Automation & Operations</strong>
              <i class="bi bi-gear" aria-hidden="true"></i>
            </div>
            <ul class="list">
              <li>Workflow automation & system optimization</li>
              <li>CMMS & health-tech system digitization</li>
              <li>CI/CD pipelines, logging & monitoring</li>
              <li>API-driven process improvement</li>
            </ul>
          </div>
    
          <!-- Data & Infra -->
          <div class="panel">
            <div class="panel-top">
              <strong>Data & Infrastructure</strong>
              <i class="bi bi-database" aria-hidden="true"></i>
            </div>
            <ul class="list">
              <li>Data pipelines, scripting & reporting</li>
              <li>Pandas, NumPy, analytics workflows</li>
              <li>Linux, Git, container-ready workflows</li>
              <li>Device connectivity & IoT integrations</li>
            </ul>
          </div>
    
          <!-- AI & Cloud -->
          <div class="panel">
            <div class="panel-top">
              <strong>AI Platforms & Cloud</strong>
              <i class="bi bi-cpu" aria-hidden="true"></i>
            </div>
            <ul class="list">
              <li>Azure App Services (deployment & scaling)</li>
              <li>Azure AI Search & Document Intelligence (exposure)</li>
              <li>Prompt-based workflows & AI orchestration</li>
              <li>Semantic search & AI-backed document processing</li>
            </ul>
          </div>
    
          <!-- Leadership & Soft Skills -->
          <div class="panel">
            <div class="panel-top">
              <strong>Tech Leadership & Enablement</strong>
              <i class="bi bi-people" aria-hidden="true"></i>
            </div>
            <ul class="list">
              <li>Technical training & team mentoring</li>
              <li>Cross-functional communication (clinical & technical)</li>
              <li>Requirements gathering & solution architecture</li>
              <li>SOP development, documentation & compliance support</li>
            </ul>
          </div>
    
          <!-- Certifications -->
          <div class="panel" style="grid-column: 1 / -1;">
            <div class="panel-top">
              <strong>Certifications & Technical Training</strong>
              <i class="bi bi-award" aria-hidden="true"></i>
            </div>
            <p class="kicker" style="margin: 2px 0 0; color: var(--faint);">
              QA • Imaging • Clinical Systems
            </p>
    
            <div class="chips" style="margin-top:12px;">
              <span class="chip">Medical Device QA &amp; Safety — Fluke Biomedical</span>
              <span class="chip">Advanced Imaging QA — PET/CT &amp; SPECT/CT (GE Healthcare)</span>
              <span class="chip">Clinical Systems &amp; Simulation — Oxygen QA, ProSim 4 &amp; 8</span>
              <span class="chip">GitHub Actions (CI/CD pipelines)</span>
              <span class="chip">Docker (container-ready workflows)</span>
              <span class="chip">Azure-ready cloud architecture</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section" id="contact">
      <div class="wrap">
        <div class="section-head">
          <div>
            <p class="kicker"><span class="dot" aria-hidden="true"></span> Contact</p>
            <h2>Direct.</h2>
          </div>
          <p class="muted hide-sm">Fast response for backend systems, automation, and product-grade engineering.</p>
        </div>

        <div class="contact">
          <div>
            <strong>Email</strong>
            <span>samuelmwas262@gmail.com</span>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn primary" href="mailto:samuelmwas262@gmail.com"><i class="bi bi-envelope" aria-hidden="true"></i>Email</a>
            <a class="btn" href="https://www.linkedin.com/in/samuel-mwangi-11597a245/" target="_blank" rel="noreferrer"><i class="bi bi-linkedin" aria-hidden="true"></i>LinkedIn</a>
            <a class="btn" href="https://github.com/scriptedSyntax" target="_blank" rel="noreferrer"><i class="bi bi-github" aria-hidden="true"></i>GitHub</a>
            <a class="btn" href="https://raw.githubusercontent.com/scriptedSyntax/portfolio/724a661f104f20970e49d6822be733bc0790b2e8/samuel%20cv%20tech%20engineer.pdf" target="_blank" rel="noreferrer"><i class="bi bi-file-earmark-pdf" aria-hidden="true"></i>CV</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <div class="foot">
        <div><strong style="color:var(--ink); font-weight:900;">© <span id="y"></span> Samuel Mwangi</strong></div>
        <div class="foot-links" aria-label="Footer links">
          <a href="https://github.com/scriptedSyntax" target="_blank" rel="noreferrer">GitHub</a>
          <a href="https://www.linkedin.com/in/samuel-mwangi-11597a245/" target="_blank" rel="noreferrer">LinkedIn</a>
          <a href="https://www.youtube.com/@SamPlifiedBytes" target="_blank" rel="noreferrer">YouTube</a>
          <a href="mailto:samuelmwas262@gmail.com">Email</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Floating stack: Back-to-top ABOVE Theme toggle -->
  <div class="float-stack" aria-label="Floating actions">
    <button class="floatbtn top" id="toTop" aria-label="Back to top">
      <i class="bi bi-arrow-up" aria-hidden="true"></i>
    </button>
    <button class="floatbtn" id="themeBtn" aria-label="Toggle theme">
      <i class="bi bi-sun" aria-hidden="true"></i>
    </button>
  </div>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Smooth scroll (respect reduced motion)
    const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (!reduceMotion) document.documentElement.style.scrollBehavior = 'smooth';

    // Mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');

    function closeMenu(){
      if (!mobileMenu) return;
      mobileMenu.hidden = true;
      mobileMenu.style.display = 'none';
      menuBtn?.setAttribute('aria-expanded', 'false');
    }
    function openMenu(){
      if (!mobileMenu) return;
      mobileMenu.hidden = false;
      mobileMenu.style.display = 'block';
      menuBtn?.setAttribute('aria-expanded', 'true');
    }

    menuBtn?.addEventListener('click', () => {
      const expanded = menuBtn.getAttribute('aria-expanded') === 'true';
      expanded ? closeMenu() : openMenu();
    });

    mobileMenu?.addEventListener('click', (e) => {
      const a = e.target.closest('a');
      if (a) closeMenu();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeMenu();
    });

    // Seg nav active state (ALL / SYSTEMS / REPOS) based on scroll position
    const segLinks = Array.from(document.querySelectorAll('.seg a'));
    const sections = [
      { id: 'work', el: document.getElementById('work') },
      { id: 'systems', el: document.getElementById('systems') },
      { id: 'repos', el: document.getElementById('repos') }
    ].filter(s => s.el);

    function setActiveSeg(id){
      segLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === `#${id}`));
    }

    function onScrollActiveSeg(){
      // Find the last section above the fold
      const y = window.scrollY + 160;
      let current = 'work';
      for (const s of sections){
        const top = s.el.getBoundingClientRect().top + window.scrollY;
        if (y >= top) current = s.id;
      }
      setActiveSeg(current === 'systems' || current === 'repos' ? current : 'work');
    }
    window.addEventListener('scroll', onScrollActiveSeg, { passive:true });
    onScrollActiveSeg();

    // Back to top visibility
    const toTop = document.getElementById('toTop');
    const showAfter = 480;
    function onScrollTopBtn(){
      if (window.scrollY > showAfter) toTop.classList.add('show');
      else toTop.classList.remove('show');
    }
    window.addEventListener('scroll', onScrollTopBtn, { passive:true });
    onScrollTopBtn();
    toTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: reduceMotion ? 'auto' : 'smooth' });
    });

    // Theme: follow device theme unless user has manually overridden via localStorage
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeBtn');
    const systemMQ = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');

    function getStoredTheme(){
      const t = localStorage.getItem('theme');
      return (t === 'dark' || t === 'light') ? t : null;
    }

    function applyTheme(theme){
      root.setAttribute('data-theme', theme);
    }

    function applySystemThemeIfNoOverride(){
      if (getStoredTheme()) return;
      const theme = systemMQ && systemMQ.matches ? 'dark' : 'light';
      applyTheme(theme);
      syncThemeIcon();
    }

    function syncThemeIcon(){
      const isDark = root.getAttribute('data-theme') === 'dark';
      themeBtn.innerHTML = isDark
        ? '<i class="bi bi-sun" aria-hidden="true"></i>'
        : '<i class="bi bi-moon-stars" aria-hidden="true"></i>';
      themeBtn.setAttribute('aria-label', isDark ? 'Switch to light theme' : 'Switch to dark theme');
    }

    // Ensure icon matches current theme (set in head)
    syncThemeIcon();

    // React to OS theme changes (only if no manual override)
    if (systemMQ){
      const onChange = () => applySystemThemeIfNoOverride();
      if (typeof systemMQ.addEventListener === 'function') systemMQ.addEventListener('change', onChange);
      else if (typeof systemMQ.addListener === 'function') systemMQ.addListener(onChange);
    }

    // Manual toggle still works; saves override
    themeBtn.addEventListener('click', () => {
      const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      applyTheme(next);
      localStorage.setItem('theme', next);
      syncThemeIcon();
    });

    // Safety: never allow horizontal scroll caused by any element
    document.addEventListener('DOMContentLoaded', () => {
      document.body.style.overflowX = 'hidden';
      applySystemThemeIfNoOverride();
    });
  </script>
</body>
</html>
